<!DOCTYPE html>
<html layout:decorate="~{layout}" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:layout="http://www.w3.org/1999/xhtml">
<div layout:fragment="content" class="container">
<!--    <form th:object="${menuForm}" method="post">-->
        <div class="d-flex align-items-center p-2" style="height:5%; padding:10px;margin: 20px 10px 0 10px;">
            <h4 class="fw-bold" style="flex:6;margin: 0 10px 0 10px;">메뉴 등록</h4>
            <button type="submit" class="btn btn-sm btn-dark">저장하기</button>
        </div>
        <div style="height:70%">
            <form th:action id="menuupdateForm" method="post">
                <div>
                    <li th:if="${menuList == null}">
                        Empty
                    </li>
                    <li th:unless="${menuList == null}" th:each="${menu : menuList}">
                        <input type="text" name="menuName" th:value="${menu.menuName}">
                        <input type="text" name="price" th:value="${menu.price}">
                        <div>
                            <input type="button" value="수정" onclick="menuUpdate(this)">
                        </div>
                        <div>
                            <input type="button" value="삭제" onclick="menuDelete(this)">
                        </div>
                    </li>
                </div>
            </form>
            <form th:action="@{|/store/addmenu|}">
                <div>
                    <input type="submit" value="추가">
                </div>
            </form>


            <div class="m-3">
                <div style="background: white; box-shadow:0px 0px 10px rgba(0,0,0,0.2);border-radius: 10px; padding : 10px; margin-bottom:20px;">
                    <!-- CSRF 토큰 -->
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <!-- 이름 입력 -->
<!--                    <div class="mb-3">-->
<!--                        <label for="menuName" class="form-label">메뉴명</label>-->
<!--                        <input type="text" name="menuName" placeholder="메뉴">-->
<!--                        &lt;!&ndash;                        <textarea th:field="*{menuName}" class="form-control" rows="1" placeholder="이름"></textarea>&ndash;&gt;-->
<!--                    </div>-->
<!--                    &lt;!&ndash; 내용 입력 &ndash;&gt;-->
<!--                    <div class="mb-3">-->
<!--                        <label for="price" class="form-label">가격</label>-->
<!--                        <input type="text" name="price" placeholder="가격">-->
<!--                        &lt;!&ndash;                        <textarea th:field="*{price}" class="form-control" rows="15"></textarea>&ndash;&gt;-->
<!--                    </div>-->
<!--    </form>-->
    <script>
        function menuUpdate(input) {
            if (input.form) {
                // 확인할 작업이 있다면 여기에 추가

                // 실제로 사용하려는 엔드포인트로 수정
                input.form.action = '/store/updatemenu';
                input.form.submit();
                }
        }
        function menuDelete(input) {
             if (input.form) {
                // 확인할 작업이 있다면 여기에 추가

                // 실제로 사용하려는 엔드포인트로 수정
                input.form.action = '/store/deletemenu';
                input.form.submit();
                }
        }
        function postbookmodifytitle(input, action) {
        if(confirm(action.msg)) {
            input.form.action = action.url;
            input.form.submit();
        }
    }
    </script>

</div>
</html>
